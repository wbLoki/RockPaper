FROM golang:latest

ARG CLIENT_URL
ARG REDIS_ADDR
ARG REDIS_DB
ARG REDIS_PASSWORD

ENV CLIENT_URL=${CLIENT_URL}
ENV REDIS_ADDR=${REDIS_ADDR}
ENV REDIS_DB=${REDIS_DB}
ENV REDIS_PASSWORD=${REDIS_PASSWORD}

WORKDIR /app

COPY go.mod go.sum ./

RUN go mod download

COPY . .

RUN go build -o main ./cmd/main.go

EXPOSE 8080

CMD ["./main"]
